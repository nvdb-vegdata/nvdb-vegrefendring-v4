<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vegreferanse Historikk</title>
    <link rel="stylesheet" href="styles.css">
</head>


<body>
<div class="container">
    <header>
        <h1>Vegreferanse Historikk</h1>
        <p>Søk etter historiske vegreferanser basert på dagens referanse eller koordinater.</p>
        <br>
        <p>Vi minner om søsterløsning <a href="https://nvdb-vegdata.github.io/nvdb-vegrefkart/">vegrefkart</a>.</p>
        <p style="font-size:1.5em; font-weight:bold; color:#d32f2f;">Merk! Dette er en betaversjon under testing</p>
    </header>

    <main>

        <!-- Add this in your <body>, where you want the map -->
        <!--        <div id="map" style="height: 200px;"></div>-->


        <div class="search-sections">
            <button id="toggleSearchSections" class="btn-secondary" style="float:right; margin-bottom:10px;" aria-label="Minimize">
                <span id="toggleIcon" style="font-size:1.2em;">▲</span>
            </button>
            <section class="search-section">
                <h2>Søk på vegreferanse</h2>
                <form id="vegrefForm" class="search-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fylke">Fylke *</label>
                            <input type="number" id="fylke" name="fylke" value="8" min="1" max="99" required>
                        </div>
                        <div class="form-group">
                            <label for="kommune">Kommune</label>
                            <input type="text" id="kommune" name="kommune" placeholder="00" maxlength="2">
                        </div>
                        <div class="form-group">
                            <label for="kat">Kategori *</label>
                            <select id="kat" name="kat" required>
                                <option value="">Velg kategori</option>
                                <option value="E" selected>E - Europavei</option>
                                <option value="R">R - Riksvei</option>
                                <option value="F">F - Fylkesvei</option>
                                <option value="K">K - Kommunal vei</option>
                                <option value="P">P - Privat vei</option>
                                <option value="S">S - Skogsbilvei</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="stat">Status</label>
                            <select id="stat" name="stat">
                                <option value="V" selected>V - Eksisterende vei</option>
                                <option value="A">A - Arm</option>
                                <option value="B">B - Beredskapsvei</option>
                                <option value="E">E - Gang-/sykkelvei</option>
                                <option value="G">G - Gangvei</option>
                                <option value="H">H - Hovedvei</option>
                                <option value="M">M - Rampe</option>
                                <option value="P">P - Proposed</option>
                                <option value="Q">Q - Rundkjøring</option>
                                <option value="S">S - Sykkelvei</option>
                                <option value="T">T - Traktorvei</option>
                                <option value="U">U - Under bygging</option>
                                <option value="W">W - Vinterstengd</option>
                                <option value="X">X - Ikke eksisterende</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="vegnr">Vegnummer *</label>
                            <input type="number" id="vegnr" name="vegnr" value="18" min="1" max="99999" required>
                        </div>
                        <div class="form-group">
                            <label for="hp">Hovedparsell</label>
                            <input type="number" id="hp" name="hp" value="1" min="1" max="999">
                        </div>
                        <div class="form-group">
                            <label for="meter">Meter</label>
                            <input type="number" id="meter" name="meter" value="0" min="0" max="99999">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vegrefForm_dato">Dato (YYYY-MM-DD)</label>
                            <input type="text" id="vegrefForm_dato" name="dato" placeholder="YYYY-MM-DD" pattern="\d{4}-\d{2}-\d{2}">
                        </div>
                    </div>
                    <button type="submit" class="btn-primary">Søk vegreferanse</button>
                    <button type="reset" class="btn-secondary">Nullstill skjema</button>
                </form>
            </section>
            <section class="search-section">
                <h2>Søk på vegsystemreferanse</h2>
                <form id="vegsysrefForm" class="search-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fylke2">Fylke</label>
                            <input type="number" id="fylke2" name="fylke"  min="1" max="99">
                        </div>
                        <div class="form-group">
                            <label for="kommune2">Kommune</label>
                            <input type="text" id="kommune2" name="kommune" placeholder="00" maxlength="2">
                        </div>
                        <div class="form-group">
                            <label for="kat2">Kategori *</label>
                            <select id="kat2" name="kat" required>
                                <option value="">Velg kategori</option>
                                <option value="E" selected>E - Europavei</option>
                                <option value="R">R - Riksvei</option>
                                <option value="F">F - Fylkesvei</option>
                                <option value="K">K - Kommunal vei</option>
                                <option value="P">P - Privat vei</option>
                                <option value="S">S - Skogsbilvei</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="stat2">Status</label>
                            <select id="stat2" name="stat">
                                <option value="V" selected>V - Eksisterende vei</option>
                                <option value="A">A - Arm</option>
                                <option value="B">B - Beredskapsvei</option>
                                <option value="E">E - Gang-/sykkelvei</option>
                                <option value="G">G - Gangvei</option>
                                <option value="H">H - Hovedvei</option>
                                <option value="M">M - Rampe</option>
                                <option value="P">P - Proposed</option>
                                <option value="Q">Q - Rundkjøring</option>
                                <option value="S">S - Sykkelvei</option>
                                <option value="T">T - Traktorvei</option>
                                <option value="U">U - Under bygging</option>
                                <option value="W">W - Vinterstengd</option>
                                <option value="X">X - Ikke eksisterende</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="vegnr2">Vegnummer *</label>
                            <input type="number" id="vegnr2" name="vegnr" value="18" min="1" max="99999" required>
                        </div>
                        <div class="form-group">
                            <label for="strekning">Strekning</label>
                            <input type="number" id="strekning" name="hp" value="1" min="1" max="999">
                        </div>
                        <div class="form-group">
                            <label for="delstrekning">Delstrekning</label>
                            <input type="number" id="delstrekning" name="hp" value="1" min="1" max="999">
                        </div>
                        <div class="form-group">
                            <label for="meter2">Meter</label>
                            <input type="number" id="meter2" name="meter" value="0" min="0" max="99999">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="extraType">Kryssystem / Sideanlegg</label>
                        <select id="extraType" name="extraType">
                            <option value="">Ingen</option>
                            <option value="sideanlegg">Sideanlegg</option>
                            <option value="kryssystem">Kryssystem</option>
                        </select>
                    </div>
                    <div class="form-group" id="sideanleggsdel-group" style="display:none;">
                        <label for="sideanleggsdel">Sideanleggsdel</label>
                        <input type="number" id="sideanleggsdel" name="sideanleggsdel" placeholder="Sideanleggsdel" min="1">
                        <label for="sideanleggsdel">Sideanlegg meter</label>
                        <input type="number" id="sideanleggsdel_meter" name="sideanleggsdel_meter" placeholder="Sideanleggsdel meter">
                    </div>
                    <div class="form-group" id="kryssdel-group" style="display:none;">
                        <label for="kryssdel">Kryssdel</label>
                        <input type="number" id="kryssdel" name="kryssdel" placeholder="Kryssdel" min="1">
                        <label for="kryssdel">Kryssdel meter</label>
                        <input type="number" id="kryssdel_meter" name="kryssdel_meter" placeholder="Kryssdel meter">
                    </div>
                    <script>
                        document.addEventListener('DOMContentLoaded', function () {
                            const extraType = document.getElementById('extraType');
                            const sideanleggsdelGroup = document.getElementById('sideanleggsdel-group');
                            const kryssdelGroup = document.getElementById('kryssdel-group');
                            const sideanleggsdelInputs = [
                                document.getElementById('sideanleggsdel'),
                                document.getElementById('sideanleggsdel_meter')
                            ];
                            const kryssdelInputs = [
                                document.getElementById('kryssdel'),
                                document.getElementById('kryssdel_meter')
                            ];

                            function setRequired(inputs, required) {
                                inputs.forEach(input => {
                                    if (required) {
                                        input.setAttribute('required', '');
                                    } else {
                                        input.removeAttribute('required');
                                    }
                                });
                            }

                            extraType.addEventListener('change', function () {
                                if (this.value === 'sideanlegg') {
                                    sideanleggsdelGroup.style.display = '';
                                    kryssdelGroup.style.display = 'none';
                                    setRequired(sideanleggsdelInputs, true);
                                    setRequired(kryssdelInputs, false);
                                } else if (this.value === 'kryssystem') {
                                    sideanleggsdelGroup.style.display = 'none';
                                    kryssdelGroup.style.display = '';
                                    setRequired(sideanleggsdelInputs, false);
                                    setRequired(kryssdelInputs, true);
                                } else {
                                    sideanleggsdelGroup.style.display = 'none';
                                    kryssdelGroup.style.display = 'none';
                                    setRequired(sideanleggsdelInputs, false);
                                    setRequired(kryssdelInputs, false);
                                }
                            });
                        });
                    </script>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vegsysrefForm_dato">Dato (YYYY-MM-DD)</label>
                            <input type="text" id="vegsysrefForm_dato" name="dato" placeholder="YYYY-MM-DD"
                                   pattern="\d{4}-\d{2}-\d{2}">
                        </div>
                    </div>
                    <button type="submit" class="btn-primary">Søk vegsystemreferanse</button>
                    <button type="reset" class="btn-secondary">Nullstill skjema</button>
                </form>
            </section>

            <section class="search-section">
                <h2>Søk på koordinater</h2>
                <form id="posForm" class="search-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="easting">Øst-koordinat *</label>
                            <input type="number" id="easting" value="205060.17" name="easting" step="any" required
                                   placeholder="f.eks. 262650">
                        </div>
                        <div class="form-group">
                            <label for="northing">Nord-koordinat *</label>
                            <input type="number" id="northing" value="6560102.44" name="northing" step="any" required
                                   placeholder="f.eks. 6651180">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="posForm_dato">Dato (YYYY-MM-DD)</label>
                            <input type="text" id="posForm_dato" name="dato" placeholder="YYYY-MM-DD" pattern="\d{4}-\d{2}-\d{2}">
                        </div>
                    </div>
                    <button type="submit" class="btn-primary">Søk på koordinater</button>
                    <button type="reset" class="btn-secondary">Nullstill skjema</button>
                </form>
            </section>

            <div class="search-row">
                <section class="search-section">
                    <h2>Søk på lenkesekvensId@posisjon</h2>
                    <form id="lenkeForm" class="search-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lenkesekvensId">LenkesekvensId *</label>
                                <input type="number" id="lenkesekvensId" name="lenkesekvensId" value="521066" required
                                       placeholder="f.eks. 123456">
                            </div>
                            <div class="form-group">
                                <label for="posisjon">Posisjon *</label>
                                <input type="number" id="posisjon" name="posisjon" min="0" max="1" value="0.86004074" step="any" required placeholder="f.eks. 0.3">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lenkeForm_dato">Dato (YYYY-MM-DD)</label>
                                <input type="text" id="lenkeForm_dato" name="dato" placeholder="YYYY-MM-DD" pattern="\d{4}-\d{2}-\d{2}">
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Søk på lenkesekvensId og posisjon</button>
                        <button type="reset" class="btn-secondary">Nullstill skjema</button>
                    </form>
                </section>
            </div>
        </div>

        <section id="results" class="results-section">
            <!-- Resultater vises her -->
        </section>
    </main>
</div>

<script type="module" src="dist/app.js"></script>
<script>
    // document.addEventListener('DOMContentLoaded', function () {
    //     var map = L.map('map').setView([60.472, 8.4689], 5); // Centered on Norway
    //     L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    //         attribution: '© OpenStreetMap contributors'
    //     }).addTo(map);
    // });

    document.addEventListener('DOMContentLoaded', function () {
        const toggleBtn = document.getElementById('toggleSearchSections');
        const searchSections = document.querySelector('.search-sections');
        let minimized = false;
        toggleBtn.addEventListener('click', function () {
            minimized = !minimized;
            Array.from(searchSections.children).forEach(child => {
                if (child !== toggleBtn) {
                    child.style.display = minimized ? 'none' : '';
                }
            });
            toggleBtn.innerHTML = minimized ? '<span id="toggleIcon" style="font-size:1.2em;">▼</span>' : '<span id="toggleIcon" style="font-size:1.2em;">▲</span>';
        });
    });
</script>


</body>
</html>
